system configuration       => /etc/profile  user logname mail hostname 
                                     /etc/bashrc   umask 

user configuration          =>.bash_profile  shell PATH  configuration
                                 =>.bashrc         alias funtion configuration

chmod +x "Shell name"    => file empower,. authorize 


create "Shell name" .sh     =>create shell

./"Shell name"                => Shell name  run, execute  
sh "Shell name"                   ( if PATH not cofitguration =>local variable)

export PATH = $PATH:"(shell location directory)" =>PATH configuration ( PATH execute front line first) 
                                                                  after execute #"shellname"

PATH= echo $PATH | sed -e 's/:\/home\/isec\/isec_bin\/$//' <<< $PATH)
                                        

sort -t: -k 3 -n /etc/passwd  =>  /etc/passwd  UID sort



cat /etc/shadow | grep isec   

isec:$6 $9dkfj $ djflkjsdflkjsdflkj: n(18488)  : b(7) : c(90) :d(x) :e(z) :

 $6 => 암호 알고리즘
 $9 => 비번의 salt 값 
 $lsdfkljdlkjf => 암호 된 비번
 a => 암호 변경 일수 1970 기준   
 n => 암호 변경 유지 최소일수             passwd -n 7 isec 
 c => 암호 지속시간 최대일수              passwd -x 90 isec
 d => 암호 지속시간 만료후 계정이 잠기는 기간  chage -I x isec
 e => 사용자 계정 만기일                        chage -E z isec

passwd -S  isec =>암호상태 알려줌 
usermod -L  isec => 비번잠금
usermod -U isec => 비번 풀음

pwunconv                                shadow file use O or X
            ls -l /etc/shadow
            tail -1 /etc/passwd
pwconv
            tail -1 /etc/passwd


isec : x : 1000 : 1000 : isec : /home/isec: /bin/bash
            -u    -g      -c      -d            -s

 tail -1 /etc/passwd
             useradd -u 1100 test1
             useradd -g isec test2
             useradd -G test1 test3
 tail -3 /etc/group
            useradd -c goodbye test4
 tail -1 /etc/passwd

사용자 id 는 ihd , 홈 디렉토리는 /home/ihd 기본그룹은 ihd 보조그룹은 isec 이다 
useradd -G ihd
   

useradd admin -u 0 -g 0
useradd -o admin -u 0 -g 0  ==> UID same GID same  






usermod -u 1010 -c good -s /bin/tcsh test4
cat /etc/passwd | grep test4


useradd ktuser
ls -l /home
usermod -l skuser -d /home/skuser -m ktuser

userdel test4
tail -5 /etc/passwd
tail -5 /etc/shadow
tail -5 /etc/group
tail -5 /etc/gshadow
ls-l /home
ls-l /var/spool/mail

userdel -r test3          =< clean 
tail -5 /etc/passwd
tail -5 /etc/shadow
tail -5 /etc/group
tail -5 /etc/gshadow
ls-l /home
ls-l /var/spool/mail

 groupadd group1
 groupmod -g 2000 group1
 groupdel group1

gpasswd -a isec root
cat /etc/group | grep root
gpasswd -M isec,test1,test2  root
gpasswd -d isec root
vi /etc/group

vi /etc/default/useradd   =>> 사용자 계정설정 기준 

useradd -D   config change

GROUP  useradd -D -g      => group 
HOME useradd -D -b      => dir
INACTIVE  useradd -D -f [0or -1]  =>암호만료일 사용자 사용 
EXPIRE   useradd -D -e  => passwd 만료일 지정
SHELL    useradd -D -s  => shell 선택 
SKEL
CREATE_MAIL_SPOOL





permission        r =4 , w=2, x=1
ls -l file
- rwx  rwx    rwx . 1         root     root 0       x월 x일  text
  user group other  링크수  파일소유자 파일소유그룹

chmod 777 
         a+rwx,u+rwx,g+rwx 

chmod a=x  a.txt   권한준건빼곤 없다

useradd user1
passwd user1

chown user1.user1 a.txt     소유자 그룹소유자 바꿈 
         user1:user1 

chgrp user a.txt  = chown  .user  a.txt
                                   :user a.txt 
dir 777 file 666 

umask permission configuration
umask value 
dir  777 - value
file 666 -value

umask -S   

chmod 777 a
chmod 4705 a
chmod u-s a

chmod g+s a
chmod g+x a

yum -y install gcc   c 언어 컴파일 



file    shell name    file 정보 보여줘
strings shell name   명령어 보여줘

ssh "id"@"ip"         ip 접속 
cp -p "filename" location  -p 퍼미션 까지복사

chattr               file attribute 부여
lsattr                                   확인
       +i  "filename" read only
       -i                       제거
        +a  "filename"  read append only
        -a                               제거

 acl   Access Controll  List       
 
 setfacl -m    u:       :rwx       filename
         설정   유저이름  권한부여   파일     
         -x                          삭제
         -m    m
               umsk 설정                 퍼미션 계산 마스크 값과 유져값 합집합 사용
 
 systemctl status crond.service 
 systemctl is-active crond        상태확인

 vi /etc/crontab     =>  스케줄 설정
 01 3 15 * * root run-parts /etc/corn.monthly
 분 시 일 월 요일 

 vi /etc/cron.monthly/backup.sh
mkdir  /backup
systemctl restart crond.service
chmod 755 backup.sh
date 011503002030
rdate -s time.bora.net
ls /etc | grep cron*
cron.deny                     // dney 만 있다면 user 는 cron 사용불가능
cron.allow                   // 이에 존제하는 user 만 cron 사용가능
root echo isec > /etc/cron.allow
su isec 
crontab 
crontab -l                      permission 줘야 가능


sector => cluster =>track =>cylinder


HDD ----> RAM -----> Cache----->CPU
    page      block        word  



touch data1
stat data1  inode namuber   Modify  Access Change 확인  


/dev/dsx     HardDisk (x= a,b,c,d,...)
/dev/dsxn    parition (n=1,2,3,4,...) 
fdisk        partition 
mkfs         make file system = format

        
fstab=  file system table

linux filesystem EXT4,XFS

저널링  복구하기위해서 쓰는 system 오늘 고장나면
어제만 사용한 파일을 검색한다



fdisk -l
fdisk /etc/sdb  n   파티션 설정

mkfs -t ext4 /dev/sdb1
mkfs.ext4 /dev/sdb2
mkdir /mp1
mount /dev/sdb1 /mp1            mount point => mp
vi /etc/fstab
mount -a


df -Th         disk free  type human rederable 사용가능한 하드용량보기



fdisk -l                           swap partition
n t 82 
mkswap /dev/sdb1
swapon /dev/sdb1
swapon
blkid /dev/sdb1                        //hardware uuid value check
vi /etc/fstab

uuid= lkdsjflksjdflsdkajf swap swap defaults 0 0
/dev/sdb1   sawp  swap    defaults 0 0 

mount -a
swapon -a

ctrl + l ==>clear     

                                      swap file
mkdir /swap                            
dd if=/dev/zero of=/swap/swap01 bs=1MiB count=4096   1MB *4096 =4G 짜리 데이터가 0 으로채워진 파일을 만들어라
chmod 600 swap01       
mkswap /swap/swap01
swapon /swap/swap01
swapon
vi /etc/fstab


quota

 mkdir /userhome
 mount /dev/sdb1 /userhome
 vi /etc/fstab
 mount -a

 useradd -d /userhome/choi choi
 useradd -d /userhome/hong hong

vi /etc/fstab
/dev/sdb1   /userhome  ext4  defaults,usrjquota=aquota.user,jqfmt=vfsv0  0 0

 mount -o remount /userhome
 quotaoff -avug
 user quotas turned off
 quotacheck -augmn
 rm -fr aquota.*
 quotacheck -augmn
 touch aquota.user aquota.group
 chmod 600 aquota.*
 quotacheck -augmn
 quotaon -avug
 edquota -u choi


vgdisplay


pv => vg =>lv  

fdisk /dev/sdb
t 8e
fdisk /dev/sdc
t 8e
pvcreate /dev/sdb1
pvcreate /dev/sdb2

vgcreate vg /dev/sdb1 /dev/sdc1

lvcreate -L 300MB -n lv1 vg
 lvcreate --size  1G  --name  lv2 vg
  lvcreate --extents 100%FREE --name lv3 vg
  
   mkfs -t ext4 /dev/vg/lv1
    mkfs -t ext4 /dev/vg/lv2
     mkfs -t ext4 /dev/vg/lv3

mkdir /lvm1 /lvm2 /lvm3

mount /dev/vg/lv1 /lvm1
mount /dev/vg/lv2 /lvm2
mount /dev/vg/lv3 /lvm3

vi /etc/fstab
dev/vg/lv1  /lvm1  ext4 defaults 0 0
mount -a

raid

fdisk /dev/sdb                   //fd parition
t fd                  
fdisk /dev/sdc
t fd

mdadm -C(--create) /dev/md9 -l(--level) linear -n 2 /dev/sdb1 /dev/sdc1
                    이름                종류      하드갯수
                                 // raid 설정

mdamd -D(--detail) -S(--scan)      // raid 설정확인
mdamd  -D /etc/md9

mkfs -t ext4 /dev/md9           // format

mkdir /linerraid                   // mount
    
mount /dev/md9 /linerraid
df -Th
vi /etc/fstab
mount -a

mdadm -D -s /dev/md9
ls -l /etc/mdadm.conf
mdadm -D -s /dev/md9 > /etc/mdadm.conf
cat /etc/mdadm.conf


 umount /dev/md9                              //raid 삭제
 mdadm --stop /dev/md9
 mdadm --remove /dev/md9
 mdadm --zero-superblock /dev/sdb1 /dev/sdc1
 rm -rf /dev/mdadm.conf
 vi /etc/fstab
 fdisk /dev/sdb
 d
 fdisk /dev/sdc

   
   
    1  fdisk /dev/sdb                                 //raid0 만들기
    2  fdisk /dev/sdc
    4  mdadm -C /dev/md0 -l 0 -n 2 /dev/sdb1 /dev/sdc1
    5  mdadm -D /dev/md0
    6  mkfs -t ext4 /dev/md0
    7  mkdir /raid0
    8  mount /dev/md0 /raid0
    9  df -Th
   10  vi /etc/fstab
       /dev/md0  /raid0 ext4 defaults 0 0
   11  mount -a
   12  mdadm -D -s /dev/md0 > /etc/mdadm.conf
   13  cat /etc/mdadm.conf








 






